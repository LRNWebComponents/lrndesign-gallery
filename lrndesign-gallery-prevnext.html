<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../lrnsys-button/lrnsys-button.html">
<link rel="import" href="../iron-a11y-keys/iron-a11y-keys.html">

<!--
`lrndesign-gallery-prevnext`
A LRN element

@demo demo/index.html

@microcopy - the mental model for this element
  <lrndesign-gallery-prevnext 
    chevron = "chevron-left"             //required, "chevron-right" for next (default), or "chevron-left" for prev
    color = "white-text"                 //required, "black-text" for default theme or "white-text" for dark theme
    controls = "GALLERY-OR-DIALOG-ID"    //required
    item = "0"                           //required, index of prev/next item
    target = "GALLERY OR DIALOG OBJECT"  //required
    title = "previous">                  //required, "next" (default) or "previous"
  </lrndesign-gallery-prevnext>
-->

<dom-module id="lrndesign-gallery-prevnext">
  <template>
    <style>
      :host {
        display: inline-block;
      }
      :host #lrnsysbutton {
        height: 100%;
      }
      :host #lrnsysbutton ::slotted(a) {
        width: 100%;
        height: 100%;
        top: 0;
        position: absolute;
      }
      :host #lrnsysbutton ::slotted(a > paper-button) {
        width: 100%;
        height: 100%;
      }
      :host #lrnsysbutton ::slotted(a > paper-button > div.inner) {
        width: 100%;
        height: 100%;
      }
      :host #lrnsysbutton ::slotted(a > paper-button > div.inner > iron-icon) {
        top: 45%;
        position: absolute;
      }
      :host[type="previous"] #lrnsysbutton ::slotted(a > paper-button > div.inner > iron-icon) {
        left: 10%;
      }
      :host[type="next"] #lrnsysbutton ::slotted(a > paper-button > div.inner > iron-icon) {
        right: 10%;
      }
    </style>
    <lrnsys-button 
      disabled$="[[disabled]]" 
      text-color$="[[color]]"
      icon$="[[chevron]]"
      id="lrnsysbutton"
      item$="[[item]]" 
      aria-controls$="[[controls]]" 
      target$="[[target]]" 
      title$="[[type]]" 
      tabindex="0">
    </lrnsys-button>
    <iron-a11y-keys 
      id="a11y" 
      keys="enter" 
      target$="[[button]]"
      on-keys-pressed="_tapped">
    </iron-a11y-keys>
  </template>

  <script>
    Polymer({

      is: 'lrndesign-gallery-prevnext',
      listeners: {
        'tap': '_tapped',
      },

      properties: {
        /** 
        * button object
        */
        button: {
          type: Object,
          value: null,
        },
        /** 
        * iron-icon chevron
        */
        chevron: {
          type: String,
          value: 'chevron-right',
        },
        /** 
        * class for icon text color
        */
        color: {
          type: String,
          value: 'white-text',
        },
        /** 
        * thumbnail button's target's id
        */
        controls: {
          type: String,
          value: null,
        },
        /** 
        * prev or next item's index
        */
        item: {
          type: Number,
          value: null,
          reflectToAttribute: true,
        },
        /** 
        * prev or next item's index
        */
        disabled: {
          type: Boolean,
          computed: '_isDisabled(item)',
          reflectToAttribute: true,
        },
        /** 
        * target for the thumbnail button
        */
        target: {
          type: Object,
          value: null,
        },
        /** 
        * button title
        */
        type: {
          type: String,
          value: null,
        },
      },
      ready: function(){
        this.button = this.$.lrnsysbutton;
      },
      _isDisabled: function(item){
        return item == undefined || item == null || parseInt(item) < 0;
      },
      _tapped: function(e){
        e.preventDefault();
        if(this.disabled == false) {
          this.fire('thumbnailTap',{'item': parseInt(this.item)});
        }
      },
    });
  </script>
</dom-module>
