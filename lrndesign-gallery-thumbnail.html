<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../lrnsys-button/lrnsys-button.html">
<link rel="import" href="../iron-a11y-keys/iron-a11y-keys.html">

<!--
`lrndesign-gallery-thumbnail`
A LRN element

@demo demo/index.html

@microcopy - the mental model for this element
  <lrndesign-gallery-thumbnail
    alt = "ALT TEXT HERE"                 //required
    controls = "GALLERY-OR-DIALOG-ID"     //required
    item = "ITEM-ID"                      //required
    roundedEdges = "FALSE"                //optional, default is rounded
    src = "PATH/TO/THUMBNAIL_IMG.JPG"     //required
    target = "GALLERY OR DIALOG OBJECT">   //required
  </lrndesign-gallery-thumbnail>
-->

<dom-module id="lrndesign-gallery-thumbnail">
  <template>
    <style>
      :host {
        display: inline-block;
      }
      :host #lrnsysbutton ::slotted(a > paper-button > div.inner) {
        padding: 0 !important;
      }
      :host iron-image {
        width: 100%;
        height: 100%;
        border-radius: 3px; 
      }
      :host[rounded-edges="false"] iron-image {
        border-radius: 0px; 
      }
    </style>
    <lrnsys-button 
      id="lrnsysbutton"
      item$="[[item]]" 
      aria-controls$="[[controls]]" 
      target$="[[target]]" 
      title$="[[alt]]" 
      tabindex="-1">
      <iron-image alt$="[[alt]]" 
        class="lrndesign-gallery-thumbnail-image" 
        fade 
        sizing="cover" 
        src$="[[thumbnail]]">
      </iron-image>
    </lrnsys-button>
    <iron-a11y-keys 
      id="a11y" 
      keys="enter" 
      target$="[[button]]"
      on-keys-pressed="_tapped">
    </iron-a11y-keys>
  </template>

  <script>
    Polymer({

      is: 'lrndesign-gallery-thumbnail',
      listeners: {
        'tap': '_tapped',
      },

      properties: {
        /** 
        * gallery item's alt text
        */
        alt: {
          type: String,
          value: null,
        },
        /** 
        * thumbnail button
        */
        button: {
          type: Object,
          value: null,
        },
        /** 
        * id of the thumbnail button target
        */
        controls: {
          type: String,
          value: null,
        },
        /** 
        * gallery item's id
        */
        item: {
          type: String,
          value: null,
        },
        /** 
        * round the edges of the thumbnail?
        */
        roundedEdges: {
          type: Boolean,
          value: true,
        },
        /** 
        * target for the thumbnail button
        */
        target: {
          type: Object,
          value: null,
        },
        /** 
        * path for the thumbnail image
        */
        thumbnail: {
          type: String,
          value: null,
        },
      },
      /**
       * set iron-a11y-keys target to this
       */ 
      ready: function(){
        this.button = this.$.lrnsysbutton;
      },
      /**
       * fire navigation tapped event
       */ 
      _tapped: function(e){
        e.preventDefault();
        this.fire('navTap',{'item': this.item,'type': 'thumbnail'});
      },
    });
  </script>
</dom-module>
